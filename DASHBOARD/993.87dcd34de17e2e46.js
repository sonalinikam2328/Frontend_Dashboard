"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[993],{14993:(K,A,l)=>{l.r(A),l.d(A,{QualityControlModule:()=>V});var _=l(36895),g=l(85892),T=l(58730),b=l(92340),r=l(24006),y=l(35226),h=l.n(y),e=l(94650),x=l(10275),E=l(70262),N=l(80529);let R=(()=>{class n{constructor(t){this.http=t,this.url=b.N.base_url}findAll(t){return this.http.post(this.url+"/paymentcollectionplan/paymentcollectionplanData/",t).pipe((0,E.K)(this.handleError))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(N.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var f=l(90702);const O=["YEAR_NAME"],L=["table"];function S(n,i){1&n&&(e.TgZ(0,"div",11)(1,"label"),e._uU(2,"Select Branch "),e.TgZ(3,"sub",12),e._uU(4," * "),e.qZA()()())}function D(n,i){if(1&n&&(e.TgZ(0,"ng-option",25),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.NAME,"")}}function Z(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",11)(1,"div",13)(2,"span",14)(3,"ng-select",23,24),e.NdJ("ngModelChange",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.selectedBrach=s)})("focus",function(){e.CHM(t);const s=e.MAs(4),o=e.oxw(2);return e.KtG(o.onFocus(s))}),e.YNc(5,D,2,2,"ng-option",17),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.selectedBrach)("selectOnTab",!0)("required",t.BRANCH),e.xp6(2),e.Q6J("ngForOf",t.branch)}}function Y(n,i){if(1&n&&(e.TgZ(0,"ng-option",25),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.DATEDESC,"")}}function F(n,i){if(1&n&&(e.TgZ(0,"ng-option",25),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.DateDesc,"")}}const M=function(n){return{"fa-spin fa-spinner":n}};function Q(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"h5"),e._uU(3,"Customer Wise Complaints Received"),e.qZA()(),e.TgZ(4,"form",7)(5,"div",8)(6,"div",9),e.YNc(7,S,5,0,"div",10),e.YNc(8,Z,6,4,"div",10),e.TgZ(9,"div",11)(10,"label"),e._uU(11,"Select Finacial year "),e.TgZ(12,"sub",12),e._uU(13,"* "),e.qZA()()(),e.TgZ(14,"div",11)(15,"div",13)(16,"span",14)(17,"ng-select",15,16),e.NdJ("ngModelChange",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.selectedYear=s)})("focus",function(){e.CHM(t);const s=e.MAs(18),o=e.oxw();return e.KtG(o.onFocus(s))}),e.YNc(19,Y,2,2,"ng-option",17),e.qZA()()()(),e.TgZ(20,"div",11)(21,"label"),e._uU(22,"Select Month "),e.TgZ(23,"sub",12),e._uU(24,"* "),e.qZA()()(),e.TgZ(25,"div",11)(26,"div",13)(27,"span",14)(28,"ng-select",18,19),e.NdJ("ngModelChange",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.selectedMonth=s)})("focus",function(){e.CHM(t);const s=e.MAs(29),o=e.oxw();return e.KtG(o.onFocus(s))}),e.YNc(30,F,2,2,"ng-option",17),e.qZA()()()(),e.TgZ(31,"div",20)(32,"button",21),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.loadData())}),e._uU(33,"Go "),e._UZ(34,"i",22),e.qZA()()()()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("formGroup",t.angForm),e.xp6(3),e.Q6J("ngIf",t.showBranch),e.xp6(1),e.Q6J("ngIf",t.showBranch),e.xp6(9),e.Q6J("ngModel",t.selectedYear)("selectOnTab",!0),e.xp6(2),e.Q6J("ngForOf",t.finyear),e.xp6(9),e.Q6J("ngModel",t.selectedMonth)("selectOnTab",!0),e.xp6(2),e.Q6J("ngForOf",t.month),e.xp6(2),e.Q6J("disabled",t.isLoading),e.xp6(2),e.Q6J("ngClass",e.VKq(11,M,t.isLoading))}}function J(n,i){if(1&n&&(e.TgZ(0,"th",35),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Oqu(t.VALUE)}}function I(n,i){if(1&n&&(e.TgZ(0,"td",39),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Oqu(t??0)}}function B(n,i){if(1&n&&(e.TgZ(0,"tr")(1,"td",37),e._uU(2),e.qZA(),e.YNc(3,I,2,1,"td",38),e.qZA()),2&n){const t=i.$implicit;e.xp6(2),e.Oqu(t[0]),e.xp6(1),e.Q6J("ngForOf",t.slice(1))}}function w(n,i){if(1&n&&(e.TgZ(0,"tbody"),e.YNc(1,B,4,2,"tr",36),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.Tabledata)}}function W(n,i){1&n&&(e.TgZ(0,"tbody")(1,"td"),e._uU(2,"No Data"),e.qZA()())}function q(n,i){if(1&n&&(e.TgZ(0,"div",26)(1,"div",27)(2,"div",28)(3,"div",29)(4,"div",5)(5,"div",8)(6,"table",30)(7,"thead",31)(8,"tr")(9,"th",32),e._uU(10,"Customer Name"),e.qZA(),e.YNc(11,J,2,1,"th",33),e.qZA()(),e.YNc(12,w,2,1,"tbody",34),e.YNc(13,W,3,0,"tbody",34),e.qZA()()()()()()()),2&n){const t=e.oxw();e.xp6(11),e.Q6J("ngForOf",t.Headers),e.xp6(1),e.Q6J("ngIf",0!=t.Tabledata.length),e.xp6(1),e.Q6J("ngIf",0==t.Tabledata.length)}}const U=function(n){return{"d-flex justify-content-center":n}},H=[{path:"customerwisecomplaintsreceived",component:(()=>{class n{constructor(t,a,s,o,u){this._AppComponentService=t,this._QualityService=a,this.fb=s,this.http=o,this.router=u,this.branch=[],this.finyear=[],this.month=[],this.showBranch=!0,this.showtable=!1,this.isLoading1=!1,this.BRANCH=!1,this.isLoading=!1,this.grouping=!0,this.keyboardNavigation=!0,this.dataSource=new window.Smart.DataAdapter({virtualDataSource:function(p,c){const m=c;m.query=JSON.stringify(c.query),new window.Smart.Ajax({url:b.N.base_url+"/companyList",dataSourceType:"json",data:m},d=>{p({dataSource:d.List,virtualDataSourceLength:10})})},dataFields:["SUBGL_LONGNAME: string","INVOICE_AMT: number","CR_DAYS: number","CREDIT_DAYS: number","SUB_GLACNO: number"]}),this.filtering=!0,this.filterRow=!0,this.sortMode="one",this.paging=!0,this.columnSizeMode="default",this.columns=[{label:"SUBGL_LONGNAME",dataField:"SUBGL_LONGNAME",formatFunction(p){}},{label:"INVOICE_AMT",dataField:"INVOICE_AMT"},{label:"CR_DAYS",dataField:"CR_DAYS"},{label:"CREDIT_DAYS",dataField:"CREDIT_DAYS"},{label:"SUB_GLACNO",dataField:"SUB_GLACNO",formatFunction(p){}}],this.Tabledata=[],this.Headers=[],this.Keyarray=[]}createForm(){this.angForm=this.fb.group({BRANCH_NAME:[""],YEAR_NAME:["",r.kI.required],MONTH_NAME:["",r.kI.required]})}onFocus(t){t.open()}ngOnInit(){this.isLoading1=!0;let t=localStorage.getItem("user"),s={CODE:JSON.parse(t).COMPANY_ID};this.createForm(),this._AppComponentService.branchList(s).subscribe(o=>{o.List.length>1?(this.showBranch=!0,this.BRANCH=!0,o.List.unshift({ADDRESS1:"",ADDRESS2:null,CITY_NAME:"",CODE:"0",EMAIL_ID:null,NAME:"ALL",PHONE_NO:"",PINCODE:"",PREFIX_NAME:null}),this.branch=o.List,this.isLoading1=!1,this.selectedBrach=this.branch[0].CODE):(this.showBranch=!1,this.BRANCH=!1,this.branch=o.List,this.isLoading1=!1,this.selectedBrach=this.branch[0].CODE)}),this._AppComponentService.financialYear(s).subscribe(o=>{this.finyear=o.List,this.selectedYear=this.finyear[0].DATEVALUE}),this._AppComponentService.month(s).subscribe(o=>{this.month=o.List,this.selectedMonth=this.month[0].DateValue})}ngAfterViewInit(){document.querySelector("smart-table"),this.YEAR_NAME&&this.YEAR_NAME.focus()}init(){}handleClick(t,a){this.table.exportData(a,"table")}loadData(){this.Tabledata=[],this.Headers=[],this.Keyarray=[],this.isLoading=!0;let o,t=localStorage.getItem("user"),a=JSON.parse(t),u=this.selectedYear.substr(0,4),p=this.selectedYear.substr(4,4),c=this.selectedMonth.substr(0,2),m=this.selectedMonth.substr(2,2);o=c>"03"?p+c+m:u+c+m,this.angForm.valid?this._AppComponentService.findAll({SP_NAME:"Sel_DBCustwsComplaintsRecd",PARAM:a.COMPANY_ID+","+this.selectedBrach+","+o}).subscribe(d=>{if(this.showtable=!0,0!=d.List.recordsets.length){this.Headers=d.List.recordsets[1];for(let v=0;v<=d.List.recordsets[0].length-1;v++){const j=Object.values(d.List.recordsets[0][v]);this.Keyarray.push(j)}this.Tabledata=this.Keyarray,this.isLoading=!1}else this.isLoading=!1,h().fire("Warning","No Data Found","info")}):(this.isLoading=!1,null==this.selectedBrach&&null==this.selectedYear?h().fire("Warning","Please select branch and financial year","info"):null==this.selectedBrach?h().fire("Warning","Please select branch","info"):null==this.selectedYear&&h().fire("Warning","Please select financial year","info"))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x._),e.Y36(R),e.Y36(r.qu),e.Y36(N.eN),e.Y36(g.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-customer-wise-complaints-received"]],viewQuery:function(t,a){if(1&t&&(e.Gf(O,5),e.Gf(L,5,T.ac)),2&t){let s;e.iGM(s=e.CRH())&&(a.YEAR_NAME=s.first),e.iGM(s=e.CRH())&&(a.table=s.first)}},decls:5,vars:8,consts:[[1,"text-center"],[1,"fa",2,"font-size","46px",3,"ngClass"],[1,"fa","loader",2,"font-size","46px",3,"ngClass"],["class","card",4,"ngIf"],["class","row","id","r1","style","margin-top: 20px;margin-bottom: 20px;",4,"ngIf"],[1,"card"],[1,"card-header"],[3,"formGroup"],[1,"card-block"],[1,"form-group","row","justify-content-md-center",2,"margin","1%"],["class","col-sm-2",4,"ngIf"],[1,"col-sm-2"],[1,"required"],[1,"form-group","form-primary","form-static-label"],[1,"border-lable-flt"],["id","YEAR_NAME","bindValue","DATEVALUE","bindLabel","DATEDESC","required","","formControlName","YEAR_NAME",3,"ngModel","selectOnTab","ngModelChange","focus"],["YEAR_NAME",""],[3,"value",4,"ngFor","ngForOf"],["id","MONTH_NAME","bindValue","DateValue","bindLabel","DateDesc","required","","formControlName","MONTH_NAME",3,"ngModel","selectOnTab","ngModelChange","focus"],["MONTH_NAME",""],[1,"col-sm"],[1,"btn","btn-primary","sm",3,"disabled","click"],[1,"fa",3,"ngClass"],["id","BRANCH_NAME","bindValue","CODE","bindLabel","NAME","formControlName","BRANCH_NAME",3,"ngModel","selectOnTab","required","ngModelChange","focus"],["BRANCH_NAME",""],[3,"value"],["id","r1",1,"row",2,"margin-top","20px","margin-bottom","20px"],[1,"col-12"],[1,"table-responsive"],[1,"table-fixed"],[1,"table","table-striped","table-bordered","table-hover","compact","marginTable"],[2,"position","sticky","top","0","text-align","center"],["scope","col",1,"td_left"],["scope","col","class","td_right",4,"ngFor","ngForOf"],[4,"ngIf"],["scope","col",1,"td_right"],[4,"ngFor","ngForOf"],[1,"td_left"],["style","text-align: right;",4,"ngFor","ngForOf"],[2,"text-align","right"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"i",1)(2,"i",2),e.qZA(),e.YNc(3,Q,35,13,"div",3),e.YNc(4,q,14,3,"div",4)),2&t&&(e.xp6(1),e.Q6J("ngClass",e.VKq(4,U,a.isLoading1)),e.xp6(1),e.Q6J("ngClass",e.VKq(6,M,a.isLoading1)),e.xp6(1),e.Q6J("ngIf",!a.isLoading1),e.xp6(1),e.Q6J("ngIf",a.showtable))},dependencies:[_.mk,_.sg,_.O5,f.w9,f.jq,r._Y,r.JJ,r.JL,r.Q7,r.sg,r.u],styles:[".loader[_ngcontent-%COMP%]{position:absolute;top:45%;left:55%;transform:translate(-50%,-50%)}"]}),n})()}];let G=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.Bz.forChild(H),g.Bz]}),n})(),V=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[_.ez,G,f.A0,r.UX]}),n})()}}]);