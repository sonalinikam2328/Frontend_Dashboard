"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[993],{14993:(st,x,l)=>{l.r(x),l.d(x,{QualityControlModule:()=>ot});var m=l(36895),g=l(85892),O=l(58730),M=l(92340),Z=l(15439),a=l(24006),L=l(35226),h=l.n(L),t=l(94650),w=l(10275),D=l(70262),N=l(80529);let I=(()=>{class i{constructor(e){this.http=e,this.url=M.N.base_url}findAll(e){return this.http.post(this.url+"/paymentcollectionplan/paymentcollectionplanData/",e).pipe((0,D.K)(this.handleError))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(N.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var C=l(90702),T=l(53185);const S=["table"],Y=["YEAR_NAME"];function Q(i,r){1&i&&(t.TgZ(0,"div",12)(1,"label"),t._uU(2,"Select Branch "),t.TgZ(3,"sub",13),t._uU(4," * "),t.qZA()()())}function J(i,r){if(1&i&&(t.TgZ(0,"ng-option",26),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.NAME,"")}}function W(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",14)(2,"span",15)(3,"ng-select",24,25),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.selectedBrach=o)})("focus",function(){t.CHM(e);const o=t.MAs(4),s=t.oxw(2);return t.KtG(s.onFocus(o))}),t.YNc(5,J,2,2,"ng-option",18),t.qZA()()()()}if(2&i){const e=t.oxw(2);t.xp6(3),t.Q6J("ngModel",e.selectedBrach)("selectOnTab",!0)("required",e.BRANCH),t.xp6(2),t.Q6J("ngForOf",e.branch)}}function U(i,r){if(1&i&&(t.TgZ(0,"ng-option",26),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.DATEDESC,"")}}function B(i,r){if(1&i&&(t.TgZ(0,"ng-option",26),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.DateDesc,"")}}const y=function(i){return{"fa-spin fa-spinner":i}};function H(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"h5"),t._uU(3,"Customer Wise Complaints Received"),t.qZA()(),t.TgZ(4,"form",8)(5,"div",9)(6,"div",10),t.YNc(7,Q,5,0,"div",11),t.YNc(8,W,6,4,"div",11),t.TgZ(9,"div",12)(10,"label"),t._uU(11,"Select Finacial year "),t.TgZ(12,"sub",13),t._uU(13,"* "),t.qZA()()(),t.TgZ(14,"div",12)(15,"div",14)(16,"span",15)(17,"ng-select",16,17),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.selectedYear=o)})("focus",function(){t.CHM(e);const o=t.MAs(18),s=t.oxw();return t.KtG(s.onFocus(o))}),t.YNc(19,U,2,2,"ng-option",18),t.qZA()()()(),t.TgZ(20,"div",12)(21,"label"),t._uU(22,"Select Month "),t.TgZ(23,"sub",13),t._uU(24,"* "),t.qZA()()(),t.TgZ(25,"div",12)(26,"div",14)(27,"span",15)(28,"ng-select",19,20),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.selectedMonth=o)})("focus",function(){t.CHM(e);const o=t.MAs(29),s=t.oxw();return t.KtG(s.onFocus(o))}),t.YNc(30,B,2,2,"ng-option",18),t.qZA()()()(),t.TgZ(31,"div",21)(32,"button",22),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.loadData())}),t._uU(33,"Go "),t._UZ(34,"i",23),t.qZA()()()()()()}if(2&i){const e=t.oxw();t.xp6(4),t.Q6J("formGroup",e.angForm),t.xp6(3),t.Q6J("ngIf",e.showBranch),t.xp6(1),t.Q6J("ngIf",e.showBranch),t.xp6(9),t.Q6J("ngModel",e.selectedYear)("selectOnTab",!0),t.xp6(2),t.Q6J("ngForOf",e.finyear),t.xp6(9),t.Q6J("ngModel",e.selectedMonth)("selectOnTab",!0),t.xp6(2),t.Q6J("ngForOf",e.month),t.xp6(2),t.Q6J("disabled",e.isLoading),t.xp6(2),t.Q6J("ngClass",t.VKq(11,y,e.isLoading))}}const F=function(i){return{"show-filter-options":i}};function G(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"th",46),t._uU(1),t.TgZ(2,"div",37)(3,"div",38),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.toggleFilter(s.VALUE))}),t._UZ(4,"span",39),t.qZA(),t.TgZ(5,"div",40)(6,"div",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.applyFilter(o.column,"Option 1"))}),t._uU(7,"Filter"),t.qZA(),t.TgZ(8,"div",42)(9,"input",43),t.NdJ("blur",function(){const s=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.toggleFilterInput(s.VALUE))}),t.qZA()()()()()}if(2&i){const e=r.$implicit,n=t.oxw(2);t.xp6(1),t.hij("",e.VALUE," "),t.xp6(4),t.Q6J("ngClass",t.VKq(4,F,n.isFilterOpen[e.VALUE])),t.xp6(3),t.ekj("show-input",n.isFilterInputOpen[e.VALUE])}}function q(i,r){if(1&i&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Oqu(e??0)}}function K(i,r){if(1&i&&(t.TgZ(0,"tr")(1,"td",48),t._uU(2),t.qZA(),t.YNc(3,q,2,1,"td",49),t.qZA()),2&i){const e=r.$implicit;t.xp6(2),t.Oqu(e[0]),t.xp6(1),t.Q6J("ngForOf",e.slice(1))}}function V(i,r){if(1&i&&(t.TgZ(0,"tbody"),t.YNc(1,K,4,2,"tr",47),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.Tabledata)}}function j(i,r){1&i&&(t.TgZ(0,"tbody")(1,"td"),t._uU(2,"No Data"),t.qZA()())}function $(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",30)(4,"div",6)(5,"div",9)(6,"table",31)(7,"thead",32),t._UZ(8,"tr"),t.TgZ(9,"th",33)(10,"div",34)(11,"input",35),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.searchQuery=o)})("input",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.filterData())}),t.qZA()()(),t.TgZ(12,"tr")(13,"th",36),t._uU(14,"Customer Name "),t.TgZ(15,"div",37)(16,"div",38),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.toggleFilter("CustomerName"))}),t._UZ(17,"span",39),t.qZA(),t.TgZ(18,"div",40)(19,"div",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.applyFilter("CustomerName","Option 1"))}),t._uU(20,"Filter"),t.qZA(),t.TgZ(21,"div",42)(22,"input",43),t.NdJ("blur",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.toggleFilterInput("CustomerName"))}),t.qZA()()()()(),t.YNc(23,G,10,6,"th",44),t.qZA()(),t.YNc(24,V,2,1,"tbody",45),t.YNc(25,j,3,0,"tbody",45),t.qZA()()()()()()()}if(2&i){const e=t.oxw();t.xp6(11),t.Q6J("ngModel",e.searchQuery),t.xp6(7),t.Q6J("ngClass",t.VKq(7,F,e.isFilterOpen.CustomerName)),t.xp6(3),t.ekj("show-input",e.isFilterInputOpen.CustomerName),t.xp6(2),t.Q6J("ngForOf",e.Headers),t.xp6(1),t.Q6J("ngIf",0!=e.Tabledata.length),t.xp6(1),t.Q6J("ngIf",0==e.Tabledata.length)}}function k(i,r){if(1&i&&(t.TgZ(0,"div",51)(1,"div",52)(2,"div",6)(3,"div",53)(4,"div",54),t._UZ(5,"canvas",55),t.qZA()()()()()),2&i){const e=t.oxw();t.xp6(5),t.Q6J("datasets",e.datasets)("options",e.options)("labels",e.labels)}}const P=function(i){return{"d-flex justify-content-center":i}},z=[{path:"customerwisecomplaintsreceived",component:(()=>{class i{constructor(e,n,o,s,c){this._AppComponentService=e,this._QualityService=n,this.fb=o,this.http=s,this.router=c,this.filterValues=new Array(Headers.length).fill(""),this.columnOptions=[],this.showColumnDropdown=!0,this.filterInputValue="",this.branch=[],this.finyear=[],this.month=[],this.showBranch=!0,this.showtable=!1,this.isLoading1=!1,this.BRANCH=!1,this.isLoading=!1,this.Keyarray=[],this.searchQuery="",this.isFilterOpen={},this.isFilterInputOpen={},this.currentlyOpenInputBox=null,this.grouping=!0,this.keyboardNavigation=!0,this.dataSource=new window.Smart.DataAdapter({virtualDataSource:function(u,d){const p=d;p.query=JSON.stringify(d.query),new window.Smart.Ajax({url:M.N.base_url+"/companyList",dataSourceType:"json",data:p},v=>{u({dataSource:v.List,virtualDataSourceLength:10})})},dataFields:["SUBGL_LONGNAME: string","INVOICE_AMT: number","CR_DAYS: number","CREDIT_DAYS: number","SUB_GLACNO: number"]}),this.filtering=!0,this.filterRow=!0,this.sortMode="one",this.paging=!0,this.columnSizeMode="default",this.columns=[{label:"SUBGL_LONGNAME",dataField:"SUBGL_LONGNAME",formatFunction(u){}},{label:"INVOICE_AMT",dataField:"INVOICE_AMT"},{label:"CR_DAYS",dataField:"CR_DAYS"},{label:"CREDIT_DAYS",dataField:"CREDIT_DAYS"},{label:"SUB_GLACNO",dataField:"SUB_GLACNO",formatFunction(u){}}],this.Tabledata=[],this.Headers=[],this.lineBarChart={}}createForm(){this.angForm=this.fb.group({BRANCH_NAME:[""],YEAR_NAME:["",a.kI.required],MONTH_NAME:["",a.kI.required]})}onFocus(e){e.open()}toggleFilter(e){this.isFilterOpen[e]=!this.isFilterOpen[e],this.isFilterInputOpen[e]=!1}applyFilter(e,n){console.log(`Filter applied for ${e} with option: ${n}`)}toggleFilterInput(e){this.isFilterInputOpen[e]=!this.isFilterInputOpen[e]}showFilterInput(e){const n=e.currentTarget.querySelector(".filter-input");n&&n.classList.add("show")}hideFilterInput(e){const n=e.currentTarget.querySelector(".filter-input");n&&n.classList.remove("show")}onFilterInputChange(e){}ngOnInit(){this.isLoading1=!0;let e=localStorage.getItem("user"),o={CODE:JSON.parse(e).COMPANY_ID};this.createForm(),this._AppComponentService.branchList(o).subscribe(s=>{s.List.length>1?(this.showBranch=!0,this.BRANCH=!0,s.List.unshift({ADDRESS1:"",ADDRESS2:null,CITY_NAME:"",CODE:"0",EMAIL_ID:null,NAME:"ALL",PHONE_NO:"",PINCODE:"",PREFIX_NAME:null}),this.branch=s.List,this.isLoading1=!1,this.selectedBrach=this.branch[0].CODE):(this.showBranch=!1,this.BRANCH=!1,this.branch=s.List,this.isLoading1=!1,this.selectedBrach=this.branch[0].CODE)}),this._AppComponentService.financialYear(o).subscribe(s=>{this.finyear=s.List,this.selectedYear=this.finyear[0].DATEVALUE}),this._AppComponentService.month(o).subscribe(s=>{this.month=s.List,this.selectedMonth=this.month[0].DateValue})}ngAfterViewInit(){this.renderer.selectRootElement(this.fdateInput.nativeElement).focus()}filterData(){const e=this.searchQuery.toLowerCase().trim();this.Tabledata=this.Keyarray.filter(n=>Object.values(n).some(s=>"string"==typeof s?s.toLowerCase().includes(e):"number"==typeof s&&s.toString().includes(e)))}init(){}handleClick(e,n){this.table.exportData(n,"table")}loadData(){this.Tabledata=[],this.Headers=[],this.Keyarray=[],this.isLoading=!0;let s,e=localStorage.getItem("user"),n=JSON.parse(e),c=this.selectedYear.substr(0,4),u=this.selectedYear.substr(4,4),d=this.selectedMonth.substr(0,2),p=this.selectedMonth.substr(2,2);s=d>"03"?u+d+p:c+d+p;const f=Z(s,"YYYYMMDD").clone().endOf("month").format("YYYYMMDD");this.angForm.valid?this._AppComponentService.findAll({SP_NAME:"Sel_DBCustwsComplaintsRecd",PARAM:`'${n.COMPANY_ID}', '${this.selectedBrach}' ,'${f}'`}).subscribe(_=>{this.showtable=!0;let E=[],R=[];if(0!=_.List.recordsets.length){this.Headers=_.List.recordsets[1];for(let b=0;b<=_.List.recordsets[0].length-1;b++){let A=Object.values(_.List.recordsets[0][b]);E.push(A.splice(1,1)[0]),R.push(A[2]),this.Keyarray.push(A)}this.Tabledata=this.Keyarray,this.isLoading=!1,this.labels=E,this.datasets=[{label:"Total",backgroundColor:"rgba(52, 195, 143, 0.8)",borderColor:"rgba(52, 195, 143, 0.8)",borderWidth:1,hoverBackgroundColor:"rgba(52, 195, 143, 0.9)",hoverBorderColor:"rgba(52, 195, 143, 0.9)",data:R,barPercentage:.2}],this.options={maintainAspectRatio:!1,scales:{xAxes:[{gridLines:{color:"rgba(166, 176, 207, 0.1)"}}],yAxes:[{gridLines:{color:"rgba(166, 176, 207, 0.1)"}}]}}}else this.isLoading=!1,h().fire("Warning","No Data Found","info")}):(this.isLoading=!1,null==this.selectedBrach&&null==this.selectedYear?h().fire("Warning","Please select branch and financial year","info"):null==this.selectedBrach?h().fire("Warning","Please select branch","info"):null==this.selectedYear&&h().fire("Warning","Please select financial year","info"))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(w._),t.Y36(I),t.Y36(a.qu),t.Y36(N.eN),t.Y36(g.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-customer-wise-complaints-received"]],viewQuery:function(e,n){if(1&e&&(t.Gf(S,5,O.ac),t.Gf(Y,5)),2&e){let o;t.iGM(o=t.CRH())&&(n.table=o.first),t.iGM(o=t.CRH())&&(n.YEAR_NAME=o.first)}},decls:6,vars:9,consts:[[1,"text-center"],[1,"fa",2,"font-size","46px",3,"ngClass"],[1,"fa","loader",2,"font-size","46px",3,"ngClass"],["class","card",4,"ngIf"],["class","row","id","r1","style","margin-top: 20px;margin-bottom: 20px;",4,"ngIf"],["class","row","style","margin-top: 1px;",4,"ngIf"],[1,"card"],[1,"card-header"],[3,"formGroup"],[1,"card-block"],[1,"form-group","row","justify-content-md-center",2,"margin","1%"],["class","col-sm-2",4,"ngIf"],[1,"col-sm-2"],[1,"required"],[1,"form-group","form-primary","form-static-label"],[1,"border-lable-flt"],["id","YEAR_NAME","bindValue","DATEVALUE","bindLabel","DATEDESC","required","","autofocus","","formControlName","YEAR_NAME",3,"ngModel","selectOnTab","ngModelChange","focus"],["YEAR_NAME",""],[3,"value",4,"ngFor","ngForOf"],["id","MONTH_NAME","bindValue","DateValue","bindLabel","DateDesc","required","","formControlName","MONTH_NAME",3,"ngModel","selectOnTab","ngModelChange","focus"],["MONTH_NAME",""],[1,"col-sm"],[1,"btn","btn-primary","sm",3,"disabled","click"],[1,"fa",3,"ngClass"],["id","BRANCH_NAME","bindValue","CODE","bindLabel","NAME","required","","formControlName","BRANCH_NAME",3,"ngModel","selectOnTab","required","ngModelChange","focus"],["BRANCH_NAME",""],[3,"value"],["id","r1",1,"row",2,"margin-top","20px","margin-bottom","20px"],[1,"col-12"],[1,"table-responsive"],[1,"table-fixed"],[1,"table","table-striped","table-bordered","table-hover","compact",2,"margin-top","25px"],[2,"position","sticky","top","0","text-align","center"],["colspan","6"],[1,"search-container"],["type","text","placeholder","Search...",3,"ngModel","ngModelChange","input"],["scope","col",1,"td_left"],[1,"filter-container"],[1,"filter-toggle",3,"click"],["aria-hidden","true",1,"tnb-icon","fa","fa-caret-down"],[1,"filter-options",3,"ngClass"],[1,"filter-option",3,"click"],[1,"input-box"],["type","text","placeholder"," ",3,"blur"],["scope","col","class","td_left","style","text-align: right;",4,"ngFor","ngForOf"],[4,"ngIf"],["scope","col",1,"td_left",2,"text-align","right"],[4,"ngFor","ngForOf"],[1,"td_left"],["style","text-align: right;",4,"ngFor","ngForOf"],[2,"text-align","right"],[1,"row",2,"margin-top","1px"],[1,"col-lg"],[1,"card-body"],[1,"chartjs-chart"],["baseChart","","chartType","bar","height","300",3,"datasets","options","labels"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"i",1)(2,"i",2),t.qZA(),t.YNc(3,H,35,13,"div",3),t.YNc(4,$,26,9,"div",4),t.YNc(5,k,6,3,"div",5)),2&e&&(t.xp6(1),t.Q6J("ngClass",t.VKq(5,P,n.isLoading1)),t.xp6(1),t.Q6J("ngClass",t.VKq(7,y,n.isLoading1)),t.xp6(1),t.Q6J("ngIf",!n.isLoading1),t.xp6(1),t.Q6J("ngIf",n.showtable),t.xp6(1),t.Q6J("ngIf",n.showtable))},dependencies:[m.mk,m.sg,m.O5,C.w9,C.jq,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,a.On,T.jh],styles:[".loader[_ngcontent-%COMP%]{position:absolute;top:45%;left:55%;transform:translate(-50%,-50%)}"]}),i})()}];let X=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[g.Bz.forChild(z),g.Bz]}),i})();var tt=l(6205),et=l(66055),it=l(52054),nt=l(19668);let ot=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[m.ez,X,C.A0,a.UX,a.u5,tt.X,T.m9,nt.v,et.EW,it.Ns]}),i})()}}]);