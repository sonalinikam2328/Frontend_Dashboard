"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[993],{14993:($,A,r)=>{r.r(A),r.d(A,{QualityControlModule:()=>V});var m=r(36895),g=r(85892),y=r(58730),b=r(92340),x=r(15439),l=r(24006),E=r(35226),_=r.n(E),e=r(94650),R=r(10275),O=r(70262),M=r(80529);let Y=(()=>{class n{constructor(t){this.http=t,this.url=b.N.base_url}findAll(t){return this.http.post(this.url+"/paymentcollectionplan/paymentcollectionplanData/",t).pipe((0,O.K)(this.handleError))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(M.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var f=r(90702);const D=["YEAR_NAME"],L=["table"];function S(n,s){1&n&&(e.TgZ(0,"div",11)(1,"label"),e._uU(2,"Select Branch "),e.TgZ(3,"sub",12),e._uU(4," * "),e.qZA()()())}function Z(n,s){if(1&n&&(e.TgZ(0,"ng-option",25),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.NAME,"")}}function F(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",11)(1,"div",13)(2,"span",14)(3,"ng-select",23,24),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw(2);return e.KtG(i.selectedBrach=o)})("focus",function(){e.CHM(t);const o=e.MAs(4),i=e.oxw(2);return e.KtG(i.onFocus(o))}),e.YNc(5,Z,2,2,"ng-option",17),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.selectedBrach)("selectOnTab",!0)("required",t.BRANCH),e.xp6(2),e.Q6J("ngForOf",t.branch)}}function Q(n,s){if(1&n&&(e.TgZ(0,"ng-option",25),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.DATEDESC,"")}}function J(n,s){if(1&n&&(e.TgZ(0,"ng-option",25),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.DateDesc,"")}}const N=function(n){return{"fa-spin fa-spinner":n}};function w(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"h5"),e._uU(3,"Customer Wise Complaints Received"),e.qZA()(),e.TgZ(4,"form",7)(5,"div",8)(6,"div",9),e.YNc(7,S,5,0,"div",10),e.YNc(8,F,6,4,"div",10),e.TgZ(9,"div",11)(10,"label"),e._uU(11,"Select Finacial year "),e.TgZ(12,"sub",12),e._uU(13,"* "),e.qZA()()(),e.TgZ(14,"div",11)(15,"div",13)(16,"span",14)(17,"ng-select",15,16),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedYear=o)})("focus",function(){e.CHM(t);const o=e.MAs(18),i=e.oxw();return e.KtG(i.onFocus(o))}),e.YNc(19,Q,2,2,"ng-option",17),e.qZA()()()(),e.TgZ(20,"div",11)(21,"label"),e._uU(22,"Select Month "),e.TgZ(23,"sub",12),e._uU(24,"* "),e.qZA()()(),e.TgZ(25,"div",11)(26,"div",13)(27,"span",14)(28,"ng-select",18,19),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedMonth=o)})("focus",function(){e.CHM(t);const o=e.MAs(29),i=e.oxw();return e.KtG(i.onFocus(o))}),e.YNc(30,J,2,2,"ng-option",17),e.qZA()()()(),e.TgZ(31,"div",20)(32,"button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.loadData())}),e._uU(33,"Go "),e._UZ(34,"i",22),e.qZA()()()()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("formGroup",t.angForm),e.xp6(3),e.Q6J("ngIf",t.showBranch),e.xp6(1),e.Q6J("ngIf",t.showBranch),e.xp6(9),e.Q6J("ngModel",t.selectedYear)("selectOnTab",!0),e.xp6(2),e.Q6J("ngForOf",t.finyear),e.xp6(9),e.Q6J("ngModel",t.selectedMonth)("selectOnTab",!0),e.xp6(2),e.Q6J("ngForOf",t.month),e.xp6(2),e.Q6J("disabled",t.isLoading),e.xp6(2),e.Q6J("ngClass",e.VKq(11,N,t.isLoading))}}function I(n,s){if(1&n&&(e.TgZ(0,"th",38),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.Oqu(t.VALUE)}}function B(n,s){if(1&n&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.Oqu(t??0)}}function W(n,s){if(1&n&&(e.TgZ(0,"tr")(1,"td",40),e._uU(2),e.qZA(),e.YNc(3,B,2,1,"td",41),e.qZA()),2&n){const t=s.$implicit;e.xp6(2),e.Oqu(t[0]),e.xp6(1),e.Q6J("ngForOf",t.slice(1))}}function U(n,s){if(1&n&&(e.TgZ(0,"tbody"),e.YNc(1,W,4,2,"tr",39),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.Tabledata)}}function q(n,s){1&n&&(e.TgZ(0,"tbody")(1,"td"),e._uU(2,"No Data"),e.qZA()())}function H(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",26)(1,"div",27)(2,"div",28)(3,"div",29)(4,"div",5)(5,"div",8)(6,"table",30)(7,"thead",31),e._UZ(8,"tr"),e.TgZ(9,"th",32)(10,"div",33)(11,"input",34),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.searchQuery=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.filterData())}),e.qZA()()(),e.TgZ(12,"tr")(13,"th",35),e._uU(14,"Customer Name"),e.qZA(),e.YNc(15,I,2,1,"th",36),e.qZA()(),e.YNc(16,U,2,1,"tbody",37),e.YNc(17,q,3,0,"tbody",37),e.qZA()()()()()()()}if(2&n){const t=e.oxw();e.xp6(11),e.Q6J("ngModel",t.searchQuery),e.xp6(4),e.Q6J("ngForOf",t.Headers),e.xp6(1),e.Q6J("ngIf",0!=t.Tabledata.length),e.xp6(1),e.Q6J("ngIf",0==t.Tabledata.length)}}const G=function(n){return{"d-flex justify-content-center":n}},K=[{path:"customerwisecomplaintsreceived",component:(()=>{class n{constructor(t,a,o,i,d){this._AppComponentService=t,this._QualityService=a,this.fb=o,this.http=i,this.router=d,this.branch=[],this.finyear=[],this.month=[],this.showBranch=!0,this.showtable=!1,this.isLoading1=!1,this.BRANCH=!1,this.isLoading=!1,this.Keyarray=[],this.searchQuery="",this.grouping=!0,this.keyboardNavigation=!0,this.dataSource=new window.Smart.DataAdapter({virtualDataSource:function(u,c){const p=c;p.query=JSON.stringify(c.query),new window.Smart.Ajax({url:b.N.base_url+"/companyList",dataSourceType:"json",data:p},C=>{u({dataSource:C.List,virtualDataSourceLength:10})})},dataFields:["SUBGL_LONGNAME: string","INVOICE_AMT: number","CR_DAYS: number","CREDIT_DAYS: number","SUB_GLACNO: number"]}),this.filtering=!0,this.filterRow=!0,this.sortMode="one",this.paging=!0,this.columnSizeMode="default",this.columns=[{label:"SUBGL_LONGNAME",dataField:"SUBGL_LONGNAME",formatFunction(u){}},{label:"INVOICE_AMT",dataField:"INVOICE_AMT"},{label:"CR_DAYS",dataField:"CR_DAYS"},{label:"CREDIT_DAYS",dataField:"CREDIT_DAYS"},{label:"SUB_GLACNO",dataField:"SUB_GLACNO",formatFunction(u){}}],this.Tabledata=[],this.Headers=[]}createForm(){this.angForm=this.fb.group({BRANCH_NAME:[""],YEAR_NAME:["",l.kI.required],MONTH_NAME:["",l.kI.required]})}onFocus(t){t.open()}ngOnInit(){this.isLoading1=!0;let t=localStorage.getItem("user"),o={CODE:JSON.parse(t).COMPANY_ID};this.createForm(),this._AppComponentService.branchList(o).subscribe(i=>{i.List.length>1?(this.showBranch=!0,this.BRANCH=!0,i.List.unshift({ADDRESS1:"",ADDRESS2:null,CITY_NAME:"",CODE:"0",EMAIL_ID:null,NAME:"ALL",PHONE_NO:"",PINCODE:"",PREFIX_NAME:null}),this.branch=i.List,this.isLoading1=!1,this.selectedBrach=this.branch[0].CODE):(this.showBranch=!1,this.BRANCH=!1,this.branch=i.List,this.isLoading1=!1,this.selectedBrach=this.branch[0].CODE)}),this._AppComponentService.financialYear(o).subscribe(i=>{this.finyear=i.List,this.selectedYear=this.finyear[0].DATEVALUE}),this._AppComponentService.month(o).subscribe(i=>{this.month=i.List,this.selectedMonth=this.month[0].DateValue})}ngAfterViewInit(){document.querySelector("smart-table"),this.YEAR_NAME&&this.YEAR_NAME.focus()}filterData(){const t=this.searchQuery.toLowerCase().trim();this.Tabledata=this.Keyarray.filter(a=>Object.values(a).some(i=>"string"==typeof i?i.toLowerCase().includes(t):"number"==typeof i&&i.toString().includes(t))),console.log("Tabledata",this.Tabledata)}init(){}handleClick(t,a){this.table.exportData(a,"table")}loadData(){this.Tabledata=[],this.Headers=[],this.Keyarray=[],this.isLoading=!0;let i,t=localStorage.getItem("user"),a=JSON.parse(t),d=this.selectedYear.substr(0,4),u=this.selectedYear.substr(4,4),c=this.selectedMonth.substr(0,2),p=this.selectedMonth.substr(2,2);i=c>"03"?u+c+p:d+c+p,x(i,"YYYYMMDD").clone().endOf("month").format("YYYYMMDD"),this.angForm.valid?this._AppComponentService.findAll({SP_NAME:"Sel_DBCustwsComplaintsRecd",PARAM:`'${a.COMPANY_ID}', '${this.selectedBrach}' ,'${i}'`}).subscribe(h=>{if(this.showtable=!0,0!=h.List.recordsets.length){this.Headers=h.List.recordsets[1];for(let v=0;v<=h.List.recordsets[0].length-1;v++){const P=Object.values(h.List.recordsets[0][v]);this.Keyarray.push(P)}this.Tabledata=this.Keyarray,this.isLoading=!1}else this.isLoading=!1,_().fire("Warning","No Data Found","info")}):(this.isLoading=!1,null==this.selectedBrach&&null==this.selectedYear?_().fire("Warning","Please select branch and financial year","info"):null==this.selectedBrach?_().fire("Warning","Please select branch","info"):null==this.selectedYear&&_().fire("Warning","Please select financial year","info"))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(R._),e.Y36(Y),e.Y36(l.qu),e.Y36(M.eN),e.Y36(g.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-customer-wise-complaints-received"]],viewQuery:function(t,a){if(1&t&&(e.Gf(D,5),e.Gf(L,5,y.ac)),2&t){let o;e.iGM(o=e.CRH())&&(a.YEAR_NAME=o.first),e.iGM(o=e.CRH())&&(a.table=o.first)}},decls:5,vars:8,consts:[[1,"text-center"],[1,"fa",2,"font-size","46px",3,"ngClass"],[1,"fa","loader",2,"font-size","46px",3,"ngClass"],["class","card",4,"ngIf"],["class","row","id","r1","style","margin-top: 20px;margin-bottom: 20px;",4,"ngIf"],[1,"card"],[1,"card-header"],[3,"formGroup"],[1,"card-block"],[1,"form-group","row","justify-content-md-center",2,"margin","1%"],["class","col-sm-2",4,"ngIf"],[1,"col-sm-2"],[1,"required"],[1,"form-group","form-primary","form-static-label"],[1,"border-lable-flt"],["id","YEAR_NAME","bindValue","DATEVALUE","bindLabel","DATEDESC","required","","formControlName","YEAR_NAME",3,"ngModel","selectOnTab","ngModelChange","focus"],["YEAR_NAME",""],[3,"value",4,"ngFor","ngForOf"],["id","MONTH_NAME","bindValue","DateValue","bindLabel","DateDesc","required","","formControlName","MONTH_NAME",3,"ngModel","selectOnTab","ngModelChange","focus"],["MONTH_NAME",""],[1,"col-sm"],[1,"btn","btn-primary","sm",3,"disabled","click"],[1,"fa",3,"ngClass"],["id","BRANCH_NAME","bindValue","CODE","bindLabel","NAME","formControlName","BRANCH_NAME",3,"ngModel","selectOnTab","required","ngModelChange","focus"],["BRANCH_NAME",""],[3,"value"],["id","r1",1,"row",2,"margin-top","20px","margin-bottom","20px"],[1,"col-12"],[1,"table-responsive"],[1,"table-fixed"],[1,"table","table-striped","table-bordered","table-hover","compact","marginTable"],[2,"position","sticky","top","0","text-align","center"],["colspan","6"],[1,"search-container"],["type","text","placeholder","Search...",3,"ngModel","ngModelChange","input"],["scope","col",1,"td_left"],["scope","col","class","td_right",4,"ngFor","ngForOf"],[4,"ngIf"],["scope","col",1,"td_right"],[4,"ngFor","ngForOf"],[1,"td_left"],["style","text-align: right;",4,"ngFor","ngForOf"],[2,"text-align","right"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"i",1)(2,"i",2),e.qZA(),e.YNc(3,w,35,13,"div",3),e.YNc(4,H,18,4,"div",4)),2&t&&(e.xp6(1),e.Q6J("ngClass",e.VKq(4,G,a.isLoading1)),e.xp6(1),e.Q6J("ngClass",e.VKq(6,N,a.isLoading1)),e.xp6(1),e.Q6J("ngIf",!a.isLoading1),e.xp6(1),e.Q6J("ngIf",a.showtable))},dependencies:[m.mk,m.sg,m.O5,f.w9,f.jq,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.sg,l.u,l.On],styles:[".loader[_ngcontent-%COMP%]{position:absolute;top:45%;left:55%;transform:translate(-50%,-50%)}"]}),n})()}];let j=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.Bz.forChild(K),g.Bz]}),n})(),V=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.ez,j,f.A0,l.UX,l.u5]}),n})()}}]);